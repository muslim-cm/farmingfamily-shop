<!doctype html>
<html lang="bn">
  <head>
    <!-- PWA Support - Android + iOS -->
    <
    <link rel="manifest" href="/manifest.json" />

    <!-- iOS Specific -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Farming Family" />

    <!-- Android/Chrome -->
    <meta name="theme-color" content="#764ba2" />

    <!-- iOS Icons (if you want custom icons for iPhone) -->
    <link rel="apple-touch-icon" href="icons/icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192x192.png" />
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-152x152.png" />

    <!-- iOS Splash Screens (optional) -->
    <link
      rel="apple-touch-startup-image"
      href="icons/splash-640x1136.png"
      media="(device-width: 320px) and (device-height: 568px)"
    />
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes"
    />
    <title>‡¶ñ‡¶∞‡¶ö ‡¶ì ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º - Farming Family</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      /* ========== EXPENSE PAGE - ULTRA COMPACT ========== */

      .expense-dashboard {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px; /* Reduced from 30px */
      }

      /* Section Cards */
      .section-card {
        background: white;
        border-radius: 16px; /* Reduced from 20px */
        padding: 18px; /* Reduced from 25px */
        margin-bottom: 20px; /* Reduced from 30px */
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); /* Reduced */
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 12px; /* Reduced from 15px */
        margin-bottom: 15px; /* Reduced from 25px */
        padding-bottom: 10px; /* Reduced from 15px */
        border-bottom: 2px solid #f0f2f5;
      }

      .section-header i {
        width: 36px; /* Reduced from 45px */
        height: 36px; /* Reduced from 45px */
        background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
        border-radius: 10px; /* Reduced from 12px */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px; /* Reduced from 24px */
        color: #667eea;
      }

      .section-header h2 {
        color: #2d3748;
        font-size: 18px; /* Reduced from 22px */
        font-weight: 600;
        margin: 0;
      }

      .section-header p {
        color: #718096;
        font-size: 12px; /* Reduced from 14px */
        margin: 3px 0 0 0; /* Reduced */
      }

      /* Form Grid */
      .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px; /* Reduced from 20px */
      }

      .form-group {
        margin-bottom: 0;
      }

      .form-group label {
        display: block;
        margin-bottom: 4px; /* Reduced from 8px */
        color: #4a5568;
        font-weight: 500;
        font-size: 12px; /* Reduced from 14px */
      }

      .form-group label i {
        margin-right: 5px; /* Reduced from 8px */
        color: #667eea;
        font-size: 12px; /* Reduced from 14px */
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 8px 12px; /* Reduced from 12px 16px */
        border: 2px solid #e2e8f0;
        border-radius: 8px; /* Reduced from 12px */
        font-size: 14px; /* Reduced from 16px */
        transition: all 0.3s;
        background: white;
      }

      /* Number inputs */
      .form-group input[type="number"] {
        -moz-appearance: textfield;
        appearance: textfield;
        font-weight: 600;
        color: #2d3748;
        letter-spacing: 0.5px;
      }

      .form-group input[type="number"]:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1); /* Reduced from 3px */
      }

      .form-group input[type="number"]::-webkit-inner-spin-button,
      .form-group input[type="number"]::-webkit-outer-spin-button {
        opacity: 1;
        height: 20px; /* Reduced from 28px */
        width: 16px; /* Reduced from 20px */
        cursor: pointer;
      }

      /* Full width items */
      .full-width {
        grid-column: span 2;
      }

      /* Stock info badge */
      .stock-badge {
        background: #f7fafc;
        border-radius: 8px; /* Reduced from 12px */
        padding: 10px 15px; /* Reduced from 15px 20px */
        margin-bottom: 15px; /* Reduced from 20px */
        display: flex;
        align-items: center;
        gap: 10px; /* Reduced from 15px */
        border-left: 4px solid #667eea; /* Reduced from 5px */
        font-size: 13px; /* Reduced from 15px */
        color: #2d3748;
      }

      .stock-badge i {
        color: #667eea;
        font-size: 18px; /* Reduced from 20px */
      }

      /* Total display */
      .total-display {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 8px; /* Reduced from 12px */
        padding: 12px 15px; /* Reduced from 20px */
        margin: 15px 0; /* Reduced from 20px */
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: white;
      }

      .total-label {
        font-size: 14px; /* Reduced from 16px */
        font-weight: 500;
        opacity: 0.95;
      }

      .total-amount {
        font-size: 20px; /* Reduced from 28px */
        font-weight: 700;
      }

      /* Action buttons */
      .action-btn {
        width: 100%;
        padding: 10px; /* Reduced from 16px */
        border: none;
        border-radius: 8px; /* Reduced from 12px */
        font-size: 14px; /* Reduced from 16px */
        font-weight: 600;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px; /* Reduced from 10px */
        transition: all 0.3s;
        margin-top: 8px; /* Reduced from 10px */
      }

      .action-btn i {
        font-size: 16px; /* Reduced from 18px */
      }

      .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); /* Reduced */
      }

      .btn-purchase {
        background: linear-gradient(135deg, #00b09b, #96c93d);
      }

      .btn-damage {
        background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      }

      .btn-expense {
        background: linear-gradient(135deg, #667eea, #764ba2);
      }

      /* Recent transactions */
      .recent-section {
        background: white;
        border-radius: 16px; /* Reduced from 20px */
        padding: 18px; /* Reduced from 25px */
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); /* Reduced */
      }

      .recent-header {
        display: flex;
        align-items: center;
        gap: 10px; /* Reduced from 12px */
        margin-bottom: 15px; /* Reduced from 20px */
        padding-bottom: 10px; /* Reduced from 15px */
        border-bottom: 2px solid #f0f2f5;
      }

      .recent-header i {
        font-size: 20px; /* Reduced from 24px */
        color: #667eea;
      }

      .recent-header h3 {
        color: #2d3748;
        font-size: 18px; /* Reduced from 20px */
        font-weight: 600;
        margin: 0;
      }

      .transaction-list {
        display: flex;
        flex-direction: column;
        gap: 8px; /* Reduced from 12px */
      }

      .transaction-item {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1.5fr;
        gap: 10px; /* Reduced from 15px */
        padding: 10px; /* Reduced from 15px */
        background: #f8fafc;
        border-radius: 8px; /* Reduced from 12px */
        align-items: center;
        font-size: 13px; /* Added */
      }

      .badge {
        padding: 4px 10px; /* Reduced from 6px 14px */
        border-radius: 16px; /* Reduced from 20px */
        font-size: 11px; /* Reduced from 12px */
        font-weight: 600;
        display: inline-block;
        text-align: center;
      }

      .badge-purchase {
        background: #00b09b15;
        color: #00b09b;
      }

      .badge-expense {
        background: #667eea15;
        color: #667eea;
      }

      .badge-damage {
        background: #ff6b6b15;
        color: #ff6b6b;
      }

      .amount {
        font-weight: 700;
        color: #2d3748;
      }

      /* Mobile menu toggle */
      .menu-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 22px; /* Reduced from 24px */
        color: #666;
        cursor: pointer;
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .expense-dashboard {
          grid-template-columns: 1fr;
          gap: 15px; /* Reduced from 20px */
        }

        .form-grid {
          grid-template-columns: 1fr;
          gap: 12px; /* Added */
        }

        .full-width {
          grid-column: span 1;
        }

        .transaction-item {
          grid-template-columns: 1fr;
          gap: 8px; /* Reduced from 10px */
        }

        .menu-toggle {
          display: block;
        }
      }

      @media (max-width: 768px) {
        .section-card {
          padding: 15px; /* Further reduced */
          margin-bottom: 15px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          padding: 6px 10px;
          font-size: 13px;
        }

        .action-btn {
          padding: 8px;
          font-size: 13px;
        }

        .total-amount {
          font-size: 18px;
        }
      }

      /* Empty state */
      .empty-state {
        text-align: center;
        padding: 30px; /* Reduced from 40px */
        color: #a0aec0;
      }

      .empty-state i {
        font-size: 40px; /* Reduced from 48px */
        margin-bottom: 10px; /* Reduced from 15px */
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- SIDEBAR - LEFT SIDE -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="shop-logo-small">
            <i class="fas fa-store"></i>
          </div>
          <h2>Farming Family</h2>
          <p class="user-role" id="userRoleDisplay">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>

        <nav class="sidebar-nav">
          <ul id="mainMenu">
            <li>
              <a href="dashboard.html">
                <i class="fas fa-home"></i>
                <span>‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</span>
              </a>
            </li>
            <li>
              <a href="sales.html">
                <i class="fas fa-cash-register"></i>
                <span>‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶Ø‡¶º</span>
              </a>
            </li>
            <li>
              <a href="products.html">
                <i class="fas fa-box"></i>
                <span>‡¶™‡¶£‡ßç‡¶Ø</span>
              </a>
            </li>
            <li class="active">
              <a href="expenses.html">
                <i class="fas fa-arrow-down"></i>
                <span>‡¶ñ‡¶∞‡¶ö ‡¶ì ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º</span>
              </a>
            </li>
            <li>
              <a href="reports.html">
                <i class="fas fa-chart-bar"></i>
                <span>‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</span>
              </a>
            </li>
            <li class="logout">
              <a href="#" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span>‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</span>
              </a>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- MAIN CONTENT - RIGHT SIDE -->
      <main class="main-content">
        <header class="top-bar">
          <button id="menuToggle" class="menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <h1>‡¶ñ‡¶∞‡¶ö ‡¶ì ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º</h1>
          <div class="user-info">
            <span id="userName">‡¶Ö‡¶§‡¶ø‡¶•‡¶ø</span>
            <i class="fas fa-user-circle"></i>
          </div>
        </header>

        <div class="content">
          <div class="expense-dashboard">
            <!-- LEFT COLUMN -->
            <div>
              <!-- Product Purchase Section -->
              <div class="section-card">
                <div class="section-header">
                  <i class="fas fa-cart-plus"></i>
                  <div>
                    <h2>‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º</h2>
                    <p>‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡ßá ‡¶∏‡ßç‡¶ü‡¶ï ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                  </div>
                </div>

                <div id="purchaseStockInfo" class="stock-badge" style="display: none">
                  <i class="fas fa-info-circle"></i>
                  <span id="purchaseStockText"></span>
                </div>

                <div class="form-grid">
                  <div class="form-group full-width">
                    <label><i class="fas fa-box"></i> ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                    <select id="purchaseProductId" onchange="loadPurchaseProductInfo()">
                      <option value="">-- ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-weight"></i> ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
                    <input
                      type="number"
                      id="purchaseQuantity"
                      step="0.05"
                      min="0.05"
                      value="1.00"
                      placeholder="‡ßß.‡ß¶‡ß¶"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-balance-scale"></i> ‡¶á‡¶â‡¶®‡¶ø‡¶ü</label>
                    <select id="purchaseUnit">
                      <option value="pc">‡¶™‡¶ø‡¶∏</option>
                      <option value="kg">‡¶ï‡ßá‡¶ú‡¶ø</option>
                      <option value="cage">‡¶ï‡ßá‡¶ú (‡ß©‡ß¶ ‡¶™‡¶ø‡¶∏)</option>
                      <option value="‡¶π‡¶æ‡¶≤‡¶ø">‡¶π‡¶æ‡¶≤‡¶ø (‡ß™ ‡¶™‡¶ø‡¶∏)</option>
                      <option value="‡¶°‡¶ú‡¶®">‡¶°‡¶ú‡¶® (‡ßß‡ß® ‡¶™‡¶ø‡¶∏)</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-tag"></i> ‡¶ï‡ßç‡¶∞‡ßü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶á‡¶â‡¶®‡¶ø‡¶ü)</label>
                    <input
                      type="number"
                      id="purchaseRate"
                      step="0.05"
                      min="0.05"
                      placeholder="‡ß¶.‡ß¶‡ß¶"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-percent"></i> ‡¶õ‡¶æ‡¶°‡¶º</label>
                    <input
                      type="number"
                      id="purchaseDiscount"
                      step="0.05"
                      min="0"
                      value="0.00"
                      placeholder="‡ß¶.‡ß¶‡ß¶"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-truck"></i> ‡¶∏‡¶∞‡¶¨‡¶∞‡¶æ‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ</label>
                    <input type="text" id="purchaseSupplier" placeholder="‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï" />
                  </div>

                  <div class="form-group full-width">
                    <label><i class="fas fa-sticky-note"></i> ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø</label>
                    <textarea id="purchaseNotes" rows="2" placeholder="‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï"></textarea>
                  </div>
                </div>

                <div class="total-display">
                  <span class="total-label"><i class="fas fa-calculator"></i> ‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö:</span>
                  <span class="total-amount" id="purchaseTotal">‡ß¶.‡ß¶‡ß¶</span>
                </div>

                <button
                  id="savePurchaseBtn"
                  class="action-btn btn-purchase"
                  onclick="savePurchase()"
                >
                  <i class="fas fa-save"></i> ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
              </div>

              <!-- Damage/Death Entry Section -->
              <div class="section-card">
                <div class="section-header">
                  <i class="fas fa-exclamation-triangle"></i>
                  <div>
                    <h2>‡¶ï‡ßç‡¶∑‡¶§‡¶ø / ‡¶Æ‡ßÉ‡¶§‡ßç‡¶Ø‡ßÅ / ‡¶ì‡¶ú‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</h2>
                    <p>‡¶∏‡ßç‡¶ü‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡ßç‡¶∑‡¶§‡¶ø, ‡¶Æ‡ßÉ‡¶§‡ßç‡¶Ø‡ßÅ ‡¶¨‡¶æ ‡¶ì‡¶ú‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                  </div>
                </div>

                <div id="damageStockInfo" class="stock-badge" style="display: none">
                  <i class="fas fa-info-circle"></i>
                  <span id="damageStockText"></span>
                </div>

                <div class="form-grid">
                  <div class="form-group full-width">
                    <label><i class="fas fa-box"></i> ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                    <select id="damageProductId" onchange="loadDamageProductInfo()">
                      <option value="">-- ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-tag"></i> ‡¶ß‡¶∞‡¶®</label>
                    <select id="damageType">
                      <option value="damage">‡¶ï‡ßç‡¶∑‡¶§‡¶ø (‡¶™‡¶ö‡¶æ/‡¶≠‡¶æ‡¶ô‡ßç‡¶ó‡¶æ)</option>
                      <option value="death">‡¶Æ‡ßÉ‡¶§‡ßç‡¶Ø‡ßÅ (‡¶≤‡¶æ‡¶á‡¶≠‡¶∏‡ßç‡¶ü‡¶ï)</option>
                      <option value="weight_loss">‡¶ì‡¶ú‡¶® ‡¶ï‡¶Æ‡ßá‡¶õ‡ßá</option>
                      <option value="weight_gain">‡¶ì‡¶ú‡¶® ‡¶¨‡ßá‡¶°‡¶º‡ßá‡¶õ‡ßá</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-list"></i> ‡¶ï‡¶æ‡¶∞‡¶£</label>
                    <select id="damageReason">
                      <option value="spoiled">‡¶™‡¶ö‡ßá ‡¶ó‡ßá‡¶õ‡ßá</option>
                      <option value="broken">‡¶≠‡ßá‡¶ô‡ßá ‡¶ó‡ßá‡¶õ‡ßá</option>
                      <option value="disease">‡¶∞‡ßã‡¶ó</option>
                      <option value="accident">‡¶¶‡ßÅ‡¶∞‡ßç‡¶ò‡¶ü‡¶®‡¶æ</option>
                      <option value="other">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-weight"></i> ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®</label>
                    <input
                      type="number"
                      id="damageQuantity"
                      step="0.05"
                      min="0"
                      value="0.00"
                      placeholder="‡ß¶.‡ß¶‡ß¶"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-balance-scale"></i> ‡¶á‡¶â‡¶®‡¶ø‡¶ü</label>
                    <select id="damageUnit">
                      <option value="pc">‡¶™‡¶ø‡¶∏</option>
                      <option value="kg">‡¶ï‡ßá‡¶ú‡¶ø</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-weight-hanging"></i> ‡¶ì‡¶ú‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® (‡¶ï‡ßá‡¶ú‡¶ø)</label>
                    <input
                      type="number"
                      id="damageWeight"
                      step="0.05"
                      min="0"
                      value="0.00"
                      placeholder="‡ß¶.‡ß¶‡ß¶"
                    />
                  </div>

                  <div class="form-group full-width">
                    <label><i class="fas fa-sticky-note"></i> ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø</label>
                    <textarea
                      id="damageNotes"
                      rows="2"
                      placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                    ></textarea>
                  </div>
                </div>

                <button id="saveDamageBtn" class="action-btn btn-damage" onclick="saveDamage()">
                  <i class="fas fa-save"></i> ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
              </div>
            </div>

            <!-- RIGHT COLUMN -->
            <div>
              <!-- Shop Expenses Section -->
              <div class="section-card">
                <div class="section-header">
                  <i class="fas fa-money-bill-wave"></i>
                  <div>
                    <h2>‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá‡¶∞ ‡¶ñ‡¶∞‡¶ö</h2>
                    <p>‡¶≠‡¶æ‡¶°‡¶º‡¶æ, ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé, ‡¶¨‡ßá‡¶§‡¶® ‡¶ì ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶ñ‡¶∞‡¶ö</p>
                  </div>
                </div>

                <div class="form-grid">
                  <div class="form-group full-width">
                    <label><i class="fas fa-list-alt"></i> ‡¶ñ‡¶∞‡¶ö‡ßá‡¶∞ ‡¶ß‡¶∞‡¶£</label>
                    <select id="expenseCategory">
                      <option value="‡¶≠‡¶æ‡¶°‡¶º‡¶æ">‡¶≠‡¶æ‡¶°‡¶º‡¶æ</option>
                      <option value="‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé ‡¶¨‡¶ø‡¶≤">‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé ‡¶¨‡¶ø‡¶≤</option>
                      <option value="‡¶¨‡ßá‡¶§‡¶®">‡¶¨‡ßá‡¶§‡¶®</option>
                      <option value="‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡¶ø‡¶Ç">‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡¶ø‡¶Ç</option>
                      <option value="‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶®">‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶®</option>
                      <option value="‡¶Æ‡ßá‡¶∞‡¶æ‡¶Æ‡¶§‡¶ø">‡¶Æ‡ßá‡¶∞‡¶æ‡¶Æ‡¶§‡¶ø</option>
                      <option value="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-coins"></i> ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡¶ü‡¶æ‡¶ï‡¶æ)</label>
                    <input
                      type="number"
                      id="expenseAmount"
                      step="0.05"
                      min="0.05"
                      placeholder="‡ß¶.‡ß¶‡ß¶"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="fas fa-align-left"></i> ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label>
                    <input type="text" id="expenseDescription" placeholder="‡¶ñ‡¶∞‡¶ö‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£" />
                  </div>
                </div>

                <button id="saveExpenseBtn" class="action-btn btn-expense" onclick="saveExpense()">
                  <i class="fas fa-save"></i> ‡¶ñ‡¶∞‡¶ö ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
              </div>

              <!-- Recent Transactions -->
              <div class="recent-section">
                <div class="recent-header">
                  <i class="fas fa-history"></i>
                  <h3>‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®</h3>
                </div>

                <div id="recentExpensesList" class="transaction-list">
                  <!-- Dynamic content will be loaded here -->
                  <div class="empty-state">
                    <i class="fas fa-receipt"></i>
                    <p>‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Role Based UI Script -->
    <script>
      (function () {
        const userStr = localStorage.getItem("farming_user") || localStorage.getItem("user");
        if (!userStr) {
          window.location.href = "index.html";
          return;
        }

        const user = JSON.parse(userStr);

        // Check if user has permission to access expenses (Owner and Manager only)
        if (user.role === "cashier") {
          alert("‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶á ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶®‡ßá‡¶á!");
          window.location.href = "sales.html";
          return;
        }

        // Update user name and role
        const userNameEl = document.getElementById("userName");
        if (userNameEl) userNameEl.textContent = user.full_name || user.username;

        const userRoleEl = document.querySelector(".user-role");
        if (userRoleEl) {
          const roleText = user.role === "owner" ? "üëë ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï" : "üü° ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶ï";
          userRoleEl.textContent = roleText;
        }

        // Role-based menu visibility
        const menuItems = document.querySelectorAll(".sidebar-nav li");

        // Reset - show all menus
        menuItems.forEach((item) => {
          item.style.display = "block";
        });

        // Cashier should never reach here, but just in case
        if (user.role === "cashier") {
          menuItems.forEach((item) => {
            const link = item.querySelector("a");
            if (link) {
              const href = link.getAttribute("href") || "";
              if (!href.includes("sales.html") && !item.classList.contains("logout")) {
                item.style.display = "none";
              }
            }
          });
        }

        // Logout functionality
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", function (e) {
            e.preventDefault();
            localStorage.removeItem("farming_user");
            localStorage.removeItem("user");
            window.location.href = "index.html";
          });
        }

        // Mobile menu toggle
        const menuToggle = document.getElementById("menuToggle");
        const sidebar = document.getElementById("sidebar");

        if (menuToggle && sidebar) {
          menuToggle.addEventListener("click", function () {
            sidebar.classList.toggle("active");
          });
        }
      })();
    </script>

    <script src="js/expenses.js"></script>
  </body>
</html>
